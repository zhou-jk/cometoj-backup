<html>

<head>
	<meta charset="utf-8" />
	<link rel="icon" href="../image/favicon.ico" sizes="32x32" />
	<link rel="icon" href="../image/favicon.ico" sizes="192x192" />
	<link rel="stylesheet" type="text/css" href="../static/semantic.min.css">
	<script src="../static/jquery.min.js" type="text/javascript"></script>
	<script src="../static/semantic.min.js" type="text/javascript"></script>
	<title>[APIO2007-A]风铃</title>
	<script>
MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['$$$', '$$$']]
  },
  svg: {
    fontCache: 'global'
  }
};
	</script>
	<script type="text/javascript" id="MathJax-script" async src="../static/es5/tex-svg.js"></script>
</head>

<body>
	<div class="ui three item menu"><a class="header item" href="../index.html"><img src="../image/favicon.ico"> Comet OJ</a>
	</div>
	<div class="ui main container">
		<div class="ui center aligned grid">
			<div class="row">
				<h1 class="ui header">C0459 [APIO2007-A]风铃</h1>
			</div>
				<div class="row" style="margin-top: -15px"><span class="ui label">内存限制：256 MB</span> <span class="ui label">时间限制：1000 ms</span></div>
		</div>
		<div class="ui grid">
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">题目描述</h4>
					<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<p>你准备给弟弟 Ike 买一件礼物，但是，Ike 挑选礼物的方式很特别：他只喜欢那些能被他排成有序形状的东西。</p><p>你准备给 Ike 买一个风铃。风铃是一种多层的装饰品，一般挂在天花板上。每个风铃都包含一些由竖直线连起来的水平杆。每根杆的两头都有线连接，下面或者挂着另一根水平杆，或者挂着一个玩具。下面是一个风铃的例子：</p><p><img alt="屏幕快照 2019-06-21 下午2.48.32.png" src="../upload/e6991a0f08.png" width="400" height="120.11019283746556"><br></p><p>为了满足弟弟，你需要选一个满足下面两个条件的风铃：</p><ol><li>所有的玩具都在同一层（也就是说，每个玩具到天花板之间的杆的个数是一样的）或至多相差一层。</li><li>对于两个相差一层的玩具，左边的玩具比右边的玩具要更靠下一点。</li></ol><p>风铃可以按照下面的规则重新排列：任选一根杆，将杆两头的线“交换”。也就是解开一根杆左右两头的线，然后将它们绑到杆的另一端。注意这个操作不会改变更下面的杆上线的排列顺序。</p><p>由于你正在参加信息学奥林匹克的训练，所以你决定设计一个算法，判断能否通过重新排列，将一个给定的风铃变为 Ike 喜欢的样子。</p><p>考虑上面的例子，上图中的风铃满足条件 1，却不满足条件 2 ——最左边的那个玩具比它右边的要高。</p><p>但是，我们可以通过下面的步骤把这个风铃变成一个 Ike 喜欢的形式：</p><ol><li>第一步，将杆 1 的左右两边交换，这使得杆 2 和杆 3 的位置互换，交换的结果如下图所示：<br><img alt="屏幕快照 2019-06-21 下午2.51.18.png" src="../upload/76ee811752.png" width="400" height="123.51274787535411"></li><li>第二步，也是最后一步，将杆 2 的左右两边交换，这使得杆 4 到了左边，原来在左边的玩具到了右边，交换的结果发下图所示：<br><img alt="屏幕快照 2019-06-21 下午2.52.26.png" src="../upload/45d40e6e7e.png" width="400" height="121.11959287531806"><br></li></ol><p>现在的这个风铃就满足 Ike 的条件了。</p><p>你的任务是：给定一个风铃的描述，求出最少需要多少次交换才能使这风铃满足 Ike 的条件（如果可能的话）。</p>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">输入格式</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<div class=content>
								<p>输入的第一行包含一个整数 $n(1≤n≤100 000)$，表示风铃中有多少根杆。</p><p>接下来的 $n$ 行描述杆的连接信息。这部分的第 $i$ 行包含两个由空格分隔的整数 $l_i$和 $r_i$，描述杆 $i$ 的左右两边悬挂的东西。如果挂的是一个玩具，则对应的值为 $-1$，否则为挂在下面的杆的编号。</p><p>如果杆 $i$ 下面挂有其它杆，则这些杆的编号将严格大于 $i$。杆 $1$ 位于风铃的顶部。</p>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">输出</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<div class=content>
								<p>输出仅包含一个整数。表示最少需要多少次交换能使风铃满足 Ike 的条件。如果不可能满足，输出 $-1$。<br></p>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">样例</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<h4>样例输入 1</h4>
							<div class="ui existing segment">
								<pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain"><div class=content><span class=sampledata>6
2 3
-1 4
5 6
-1 -1
-1 -1
-1 -1</span></div></code></pre>
							</div>
							<h4>样例输出 1</h4>
							<div class="ui existing segment">
								<pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain"><div class=content><span class=sampledata>2</span></div></code></pre>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">提示</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<div class=content>
								
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>

</html>