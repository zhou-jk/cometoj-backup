<html>

<head>
	<meta charset="utf-8" />
	<link rel="icon" href="../image/favicon.ico" sizes="32x32" />
	<link rel="icon" href="../image/favicon.ico" sizes="192x192" />
	<link rel="stylesheet" type="text/css" href="../static/semantic.min.css">
	<script src="../static/jquery.min.js" type="text/javascript"></script>
	<script src="../static/semantic.min.js" type="text/javascript"></script>
	<title>[SDOI2019]快速查询</title>
	<script>
MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['$$$', '$$$']]
  },
  svg: {
    fontCache: 'global'
  }
};
	</script>
	<script type="text/javascript" id="MathJax-script" async src="../static/es5/tex-svg.js"></script>
</head>

<body>
	<div class="ui three item menu"><a class="header item" href="../index.html"><img src="../image/favicon.ico"> Comet OJ</a>
	</div>
	<div class="ui main container">
		<div class="ui center aligned grid">
			<div class="row">
				<h1 class="ui header">C0703 [SDOI2019]快速查询</h1>
			</div>
				<div class="row" style="margin-top: -15px"><span class="ui label">内存限制：512 MB</span> <span class="ui label">时间限制：2000 ms</span></div>
		</div>
		<div class="ui grid">
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">题目描述</h4>
					<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<p>给定一个长度为 $n$ 的整数数列，里面的元素依次编号为 $a_1,a_2,a_3,\cdots,a_n$。初始的时候，所有元素都为零。现在按照时间顺序提供了若干次关于这个数列的修改或询问，每一次修改或询问一定为以下六种情况之一：</p><ul><li><p>$1\ i\ \text{val}$：将 $a_i$ 赋值为给定整数 $\text{val}$；</p></li><li><p>$2\ \text{val}$：将所有元素同时加上 $\text{val}$；</p></li><li><p>$3\ \text{val}$：将所有元素同时乘上 $\text{val}$；</p></li><li><p>$4\ \text{val}$：将所有元素同时赋值为 $\text{val}$；</p></li><li><p>$5\ i$：询问第 $i$ 个元素 $a_i$ 现在的值是多少；</p></li><li><p>$6$：询问现在所有元素的和。</p></li></ul>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">输入格式</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<div class=content>
								<p>为了避免读入太大，输入采取如下的形式。</p><p>第一行给定整数 $n$，表示给定数列长度为 $n$。</p><p>第二行给定整数 $q$，并且之后的 $q$ 行，每一行提供一个修改或询问，输入的格式与题目所述一致，请参见样例。</p><p>我们称上述给定的修改或询问为标准操作。</p><p>之后给定一个整数 $t$，并且之后的 $t$ 行每行给定两个正整数 $a_i$ 和 $b_i$，这里的下标 $i$ 依次记为 $1$ 到 $t$。</p><p>你需要对初始值全为零的长度为 $n$ 的序列做总计 $t\times q$ 次操作。</p><p>其中第 $\Big((i-1)q+j\Big)$ 次操作形如第 $\Big((a_i + j b_i) \bmod{q} + 1\Big)$ 个给定的标准操作（$1\le i\le t$ 且 $1\le j\le q$）。</p>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">输出</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<div class=content>
								<p>输出一个整数，表示所有询问答案的累计和。</p><p>因为答案可能很大，只要求输出其结果关于 $p=10^7+19$ 取模后的值。</p><p>注意：若最终的累计和 $\text{ans}$ 小于零，你应该输出 $\big((\text{ans} \bmod{p})+p\big)\bmod{p})$。</p>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">样例</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<h4>样例输入 1</h4>
							<div class="ui existing segment">
								<pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain"><div class=content><span class=sampledata>7
28
6
4 -192321079
3 418379342
1 3 189801569
3 -840249197
4 -751917965
3 649799919
1 5 -92666141
6
4 451258008
5 1
4 696880327
3 772574465
6
4 301010289
3 480168068
5 3
5 2
4 840536237
5 5
5 4
1 7 -792284106
2 604521872
3 966540578
2 -381646699
3 -939378260
2 -20129935
6
2
0 1
197 199</span></div></code></pre>
							</div>
							<h4>样例输出 1</h4>
							<div class="ui existing segment">
								<pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain"><div class=content><span class=sampledata>2816930</span></div></code></pre>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">提示</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<div class=content>
								<p>子任务 $1$（$50$分）：$1\le n\le 500000$，$1\le q\le 10^5$ 且 $1\le t\le 5$，所有在输入中出现的 $\text{val}$ 满足 $-10^9\le \text{val}\le 10^9$，所有 $a_i$ 和 $b_i$ 满足 $0\le a_i,b_i\le 10^9$。</p><p>子任务 $2$（$50$分）：$1\le n\le 10^9$，$1\le q\le 10^5$ 且 $1\le t\le 100$，所有在输入中出现的 $\text{val}$ 满足 $-10^9\le \text{val}\le 10^9$，所有 $a_i$ 和 $b_i$ 满足 $0\le a_i,b_i\le 10^9$。</p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>

</html>