<html>

<head>
	<meta charset="utf-8" />
	<link rel="icon" href="../image/favicon.ico" sizes="32x32" />
	<link rel="icon" href="../image/favicon.ico" sizes="192x192" />
	<link rel="stylesheet" type="text/css" href="../static/semantic.min.css">
	<script src="../static/jquery.min.js" type="text/javascript"></script>
	<script src="../static/semantic.min.js" type="text/javascript"></script>
	<title>[NOI2015Day1-B]软件包管理器</title>
	<script>
MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\(', '\)']]
  },
  svg: {
    fontCache: 'global'
  }
};
	</script>
	<script type="text/javascript" id="MathJax-script" async src="../static/es5/tex-svg.js"></script>
</head>

<body>
	<div class="ui three item menu"><a class="header item" href="../index.html"><img src="../image/favicon.ico"> Comet OJ</a>
	</div>
	<div class="ui main container">
		<div class="ui center aligned grid">
			<div class="row">
				<h1 class="ui header">C0396 [NOI2015Day1-B]软件包管理器</h1>
			</div>
				<div class="row" style="margin-top: -15px"><span class="ui label">内存限制：512 MB</span> <span class="ui label">时间限制：1000 ms</span></div>
		</div>
		<div class="ui grid">
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">题目描述</h4>
					<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<p>Linux用户和OS X用户一定对软件包管理器不会陌生。通过软件包管理器，你可以通过一行命令安装某一个软件包，然后软件包管理器会帮助你从软件源下载软件包，同时自动解决所有的依赖（即下载安装这个软件包的安装所依赖的其它软件包），完成所有的配置。Debian/Ubuntu使用的apt-get，Fedora/CentOS使用的yum，以及OS X下可用的homebrew都是优秀的软件包管理器。</p><p>你决定设计你自己的软件包管理器。不可避免地，你要解决软件包之间的依赖问题。如果软件包𝐴依赖软件包𝐵，那么安装软件包𝐴以前，必须先安装软件包𝐵。同时，如果想要卸载软件包𝐵，则必须卸载软件包𝐴。现在你已经获得了所有的软件包之间的依赖关系。而且，由于你之前的工作，除0号软件包以外，在你的管理器当中的软件包都会依赖一个且仅一个软件包，而0号软件包不依赖任何一个软件包。依赖关系不存在环（若有$𝑚(𝑚≥2)$个软件包$𝐴_1,𝐴_2,𝐴_3,⋯,𝐴_𝑚$，其中$𝐴_1$依赖$𝐴_2$，$𝐴_2$依赖$𝐴_3$，$𝐴_3$依赖$𝐴_4$，......，$𝐴_{𝑚−1}$依赖$𝐴_𝑚$，而$𝐴_𝑚$依赖$𝐴_1$，则称这$𝑚$个软件包的依赖关系构成环），当然也不会有一个软件包依赖自己。</p><p>现在你要为你的软件包管理器写一个依赖解决程序。根据反馈，用户希望在安装和卸载某个软件包时，快速地知道这个操作实际上会改变多少个软件包的安装状态（即安装操作会安装多少个未安装的软件包，或卸载操作会卸载多少个已安装的软件包），你的任务就是实现这个部分。<b>注意，安装一个已安装的软件包，或卸载一个未安装的软件包，都不会改变任何软件包的安装状态，即在此情况下，改变安装状态的软件包数为0。</b></p>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">输入格式</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<div class=content>
								<p>第1行包含1个整数$𝑛$，表示软件包的总数。软件包从0开始编号。</p><p>随后一行包含$𝑛 − 1$个整数，相邻整数之间用单个空格隔开，分别表示1,2,3,⋯,𝑛−2,𝑛−1号软件包依赖的软件包的编号。</p><p>接下来一行包含1个整数$𝑞$，表示询问的总数。</p><p>之后$𝑞$行，每行1个询问。询问分为两种：</p><p>install x：表示安装软件包$𝑥$<br>uninstall x：表示卸载软件包$𝑥$</p><p>你需要维护每个软件包的安装状态，一开始所有的软件包都处于未安装状态。对于每个操作，你需要输出这步操作会改变多少个软件包的安装状态，随后应用这个操作（即改变你维护的安装状态）。</p>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">输出</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<div class=content>
								<p>包括$𝑞$行。</p><p>第$𝑖$行输出1个整数，为第𝑖步操作中改变安装状态的软件包数。<br></p>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">样例</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<h4>样例输入 1</h4>
							<div class="ui existing segment">
								<pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain"><div class=content><span class=sampledata>7
0 0 0 1 1 5
5
install 5
install 6
uninstall 1
install 4
uninstall 0</span></div></code></pre>
							</div>
							<h4>样例输出 1</h4>
							<div class="ui existing segment">
								<pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain"><div class=content><span class=sampledata>3
1
3
2
3</span></div></code></pre>
							</div>
							<h4>样例输入 2</h4>
							<div class="ui existing segment">
								<pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain"><div class=content><span class=sampledata>10
0 1 2 1 3 0 0 3 2
10
install 0
install 3
uninstall 2
install 7
install 5
install 9
uninstall 9
install 4
install 1
install 9</span></div></code></pre>
							</div>
							<h4>样例输出 2</h4>
							<div class="ui existing segment">
								<pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain"><div class=content><span class=sampledata>1
3
2
1
3
1
1
1
0
1</span></div></code></pre>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">提示</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<div class=content>
								<p>【样例1说明】<br></p><p><img alt="屏幕快照 2019-06-04 下午7.17.02.png" src="../upload/131b3cf8d4.png" width="200" height="202.6809651474531"><br></p><p>一开始所有的软件包都处于未安装状态。<br></p><p>安装5号软件包，需要安装0, 1, 5三个软件包。</p><p>之后安装6号软件包，只需要安装6号软件包。此时安装了0, 1, 5, 6四个软件包。</p><p>卸载1号软件包需要卸载1, 5, 6三个软件包。此时只有0号软件包还处于安装状态。</p><p>之后安装4号软件包，需要安装1, 4两个软件包。此时0, 1, 4处在安装状态。</p><p>最后，卸载0号软件包会卸载所有的软件包。</p><p>【数据规模与约定】<br></p><p><img alt="屏幕快照 2019-06-04 下午7.18.59.png" src="../upload/4c84203b1f.png" width="600" height="446.3942307692308"><br></p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>

</html>