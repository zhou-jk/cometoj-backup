<html>

<head>
	<meta charset="utf-8" />
	<link rel="icon" href="../image/favicon.ico" sizes="32x32" />
	<link rel="icon" href="../image/favicon.ico" sizes="192x192" />
	<link rel="stylesheet" type="text/css" href="../static/semantic.min.css">
	<script src="../static/jquery.min.js" type="text/javascript"></script>
	<script src="../static/semantic.min.js" type="text/javascript"></script>
	<title>[JSOI2019]精准预测</title>
	<script>
MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\(', '\)']]
  },
  svg: {
    fontCache: 'global'
  }
};
	</script>
	<script type="text/javascript" id="MathJax-script" async src="../static/es5/tex-svg.js"></script>
</head>

<body>
	<div class="ui three item menu"><a class="header item" href="../index.html"><img src="../image/favicon.ico"> Comet OJ</a>
	</div>
	<div class="ui main container">
		<div class="ui center aligned grid">
			<div class="row">
				<h1 class="ui header">C0863 [JSOI2019]精准预测</h1>
			</div>
				<div class="row" style="margin-top: -15px"><span class="ui label">内存限制：1024 MB</span> <span class="ui label">时间限制：2000 ms</span></div>
		</div>
		<div class="ui grid">
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">题目描述</h4>
					<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<h4>题目背景</h4><p>JYY 和他的火星探险队再次登录火星小镇，并且打算把机器学习的知识传授给火星人，从而提高火星人的生活效率。但智力有限的火星人纷纷表示不相信计算机科学。为了让火星人彻底信服，JYY 的探险队找到了他们之前关于火星详细的数据记录，并且训练了一个预测模型，这个模型能准确地预测出火星人在未来的生死情况。</p><h4>题目描述</h4><p>目前，火星小镇上有 $n$ 个居民（编号 $1, 2, \ldots, n$）。机器学习算法预测出这些居民在接下来 $T$ 个时刻（编号 $1, 2, \ldots , T$）的生死情况，每条预测都是如下两种形式之一：</p><ul><li><p><strong>难兄难弟</strong>$0\ t\ x\ y$：在 $t$ 时刻，如果 $x$ 是死亡状态，那么在 $t + 1$ 时刻，$y$ 是死亡状态。（注意，当 $x$ 在 $t$ 时刻是生存状态时，该预测也被认为是正确的）；</p></li><li><p><strong>死神来了</strong>$1\ t\ x\ y$：在 $t$ 时刻，如果 $x$ 是生存状态，那么在$t$时刻，$y$是死亡状态。（注意，当$x$在$t$时刻是死亡状态时，该预测也被认为是正确的）。</p></li></ul><p>注意本题是对某个时刻进行生死状态的预测，如果某个人在 $t$ 时刻是生存状态，在 $t + 1$ 时刻是死亡状态，你可以认为是在 $t$ 到 $t + 1$ 这段时间内发生了某个事件导致其死亡。</p><p>虽然 JYY 对自己从大数据中统计得到的模型非常自信，但火星人看到这些预测吓了一跳，表示实在难以接受这种设定，更是认为计算机科学是可怕的邪教，打破了他们平静的生活。为了安抚火星人的情绪， JYY 打算从这些预测结果中推导出一些火星人更容易接受的事实，从而安抚火星人的情绪。</p><p>具体来说，JYY 首先假设对火星人生死的预测全部正确，在此基础上，JYY 希望为小镇上的每个居民 $k$<strong>分别计算有多少个火星人有可能和他一起活到第</strong>$T+1$ 时刻，换言之，JYY 希望为每个火星人 $k$ 计算</p><p>$\sum_{1\le i\le n,i\neq k} \text{Live}(k,i)$</p><p>其中 $\text{Live}(i, j) = 1$ 表示编号为 $i$ 和 $j$ 的火星人有可能同时在第 $T + 1$ 时刻处于生还状态，否则 $\text{Live}(i, j) = 0$。</p><p>注意火星人是不能够复活的。一个火星人可能在时刻 $1$ 就处于死亡状态，也有可能有<strong>预测未覆盖的死亡</strong>情况发生（火星人在任何时候都可能死亡，但任意时刻观察到火星人的状态要么活着，要么死亡）。最后，注意到 $\text{Live}$ 是为每一对火星人<strong>分别独立计算的</strong>，因此 $\text{Live}(x, y) = \text{Live}(y, z) = 1$ 并不意味着 $\text{Live}(x, z) = 1$。</p>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">输入格式</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<div class=content>
								<p>输入第一行包含三个整数 $T, n, m$。</p><p>接下来有 $m$ 行，每行表示一条预言，每条预言第一个整数 $c$ 表示预言的类型：</p><ul><li><p>$c = 0$：接下来读入 $t, x, y$；</p></li><li><p>$c = 1$：接下来读入 $t, x, y$。</p></li></ul>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">输出</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<div class=content>
								<p>输出 $n$ 个数表示答案，用空格分割。</p>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">样例</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<h4>样例输入 1</h4>
							<div class="ui existing segment">
								<pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain"><div class=content><span class=sampledata>3 3 2
0 2 1 3
1 1 2 3</span></div></code></pre>
							</div>
							<h4>样例输出 1</h4>
							<div class="ui existing segment">
								<pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain"><div class=content><span class=sampledata>2 1 1</span></div></code></pre>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">提示</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<div class=content>
								<p><img src="../upload/c6ddc5957a.png" alt="00.PNG"></p><p>输入数据保证 $1 \le t \le T,1 \le x, y \le n$。</p><p>提示</p><p>本题内存限制 1024MiB 包含进程中运行库、堆栈等所有内存，请特别留意。</p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>

</html>