<html>

<head>
	<meta charset="utf-8" />
	<link rel="icon" href="../image/favicon.ico" sizes="32x32" />
	<link rel="icon" href="../image/favicon.ico" sizes="192x192" />
	<link rel="stylesheet" type="text/css" href="../static/semantic.min.css">
	<script src="../static/jquery.min.js" type="text/javascript"></script>
	<script src="../static/semantic.min.js" type="text/javascript"></script>
	<title>[2018提高组Day2-C]保卫王国</title>
	<script>
MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['$$$', '$$$']]
  },
  svg: {
    fontCache: 'global'
  }
};
	</script>
	<script type="text/javascript" id="MathJax-script" async src="../static/es5/tex-svg.js"></script>
</head>

<body>
	<div class="ui three item menu"><a class="header item" href="../index.html"><img src="../image/favicon.ico"> Comet OJ</a>
	</div>
	<div class="ui main container">
		<div class="ui center aligned grid">
			<div class="row">
				<h1 class="ui header">C0143 [2018提高组Day2-C]保卫王国</h1>
			</div>
				<div class="row" style="margin-top: -15px"><span class="ui label">内存限制：512 MB</span> <span class="ui label">时间限制：2000 ms</span></div>
		</div>
		<div class="ui grid">
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">题目描述</h4>
					<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<p>Z 国有 $n$ 座城市，$n − 1$ 条双向道路，每条双向道路连接两座城市，且任意两座城市都能通过若干条道路相互到达。<br></p><p>Z 国的国防部长小 Z 要在城市中驻扎军队。驻扎军队需要满足如下几个条件：</p><ul><li>一座城市可以驻扎一支军队，也可以不驻扎军队。</li><li>由道路直接连接的两座城市中至少要有一座城市驻扎军队。</li><li>在城市里驻扎军队会产生花费，在编号为 $i$ 的城市中驻扎军队的花费是 $p_i$。</li></ul><p>小 Z 很快就规划出了一种驻扎军队的方案，使总花费最小。但是国王又给小 Z 提出了 $m$ 个要求，每个要求规定了其中两座城市是否驻扎军队。小 Z 需要针对每个要求逐一给出回答。具体而言，如果国王提出的第 $j$个要求能够满足上述驻扎条件（不需要考虑第 $j$ 个要求之外的其它要求），则需要给出在此要求前提下驻扎军队的最小开销。如果国王提出的第 $j$ 个要求无法满足，则需要输出 $-1(1 \le j \le m)$。现在请你来帮助小 Z。</p>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">输入格式</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<div class=content>
								<p>第 $1$ 行包含两个正整数 $𝑛, 𝑚$ 和一个字符串 $𝑡𝑦𝑝𝑒$，分别表示城市数、要求数和数据类型。 $𝑡𝑦𝑝𝑒$ 是一个由大写字母 A，B 或 C 和一个数字 1，2，3 组成的字符串。它可以帮助你获得部分分。你可能不需要用到这个参数。这个参数的含义在【数据规模与约定】中有具体的描述。<br></p><p>第 $2$ 行 $n$ 个整数 $p_i$，表示编号 $i$ 的城市中驻扎军队的花费。</p><p>接下来 $n − 1$ 行，每行两个正整数 $u, v$，表示有一条 $u$ 到 $v$ 的双向道路。</p><p>接下来 $m$ 行，第 $j$ 行四个整数 $a, x, b, y(a \ne b)$，表示第 $j$ 个要求是在城市 $a$ 驻扎 $x$ 支军队，在城市 $b$ 驻扎 $y$ 支军队。其中，$x、y$ 的取值只有 $0$ 或 $1$：若 $x$ 为 $0$，表示城市 $a$ 不得驻扎军队，若 $x$ 为 $1$，表示城市 $a$ 必须驻扎军队；若 $y$ 为 $0$，表示城市 $b$ 不得驻扎军队，若 $y$ 为 $1$，表示城市 $b$ 必须驻扎军队。</p><p>输入中每一行相邻的两个数据之间均用一个空格分隔。<br></p>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">输出</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<div class=content>
								<p>输出共 $m$ 行，每行包含 $1$ 个整数，第 $j$ 行表示在满足国王第 $j$ 个要求时的最小开销，如果无法满足国王的第 $j$ 个要求，则该行输出 $-1$。<br><br></p>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">样例</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<h4>样例输入 1</h4>
							<div class="ui existing segment">
								<pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain"><div class=content><span class=sampledata>5 3 C3
2 4 1 3 9
1 5
5 2
5 3
3 4
1 0 3 0
2 1 3 1
1 0 5 0</span></div></code></pre>
							</div>
							<h4>样例输出 1</h4>
							<div class="ui existing segment">
								<pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain"><div class=content><span class=sampledata>12
7
-1</span></div></code></pre>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">提示</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<div class=content>
								<p>【样例解释】<br></p><p>对于第一个要求，在 4 号和 5 号城市驻扎军队时开销最小。</p><p>对于第二个要求，在 1 号、2 号、3 号城市驻扎军队时开销最小。<br></p><p>第三个要求是无法满足的，因为在 1 号、5 号城市都不驻扎军队就意味着由道路直接连接的两座城市中都没有驻扎军队。<br></p><p>【数据规模与约定】</p><p>对于100%的数据，$n, m \le 300000,1 \le p_i \le&nbsp;100000$。<br></p><p><img alt="屏幕快照 2019-05-21 下午6.54.29.png" src="../upload/2296ca443d.png" width="400" height="425.77319587628864"><br></p><p>数据类型的含义：<br>A：城市 $i$ 与城市 $i + 1$ 直接相连。<br>B：任意城市与城市 $1$ 的距离不超过 $100$（距离定义为最短路径上边的数量），即如果这棵树以 $1$ 号城市为根，深度不超过 $100$。<br>C：在树的形态上无特殊约束。<br>1：询问时保证 $a = 1, x = 1$，即要求在城市 $1$ 驻军。对 $b, y$没有限制。<br>2：询问时保证 $a, b$是相邻的（由一条道路直接连通）<br>3：在询问上无特殊约束。<br></p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>

</html>