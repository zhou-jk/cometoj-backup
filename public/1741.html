<html>

<head>
	<meta charset="utf-8" />
	<link rel="icon" href="../image/favicon.ico" sizes="32x32" />
	<link rel="icon" href="../image/favicon.ico" sizes="192x192" />
	<link rel="stylesheet" type="text/css" href="../static/semantic.min.css">
	<script src="../static/jquery.min.js" type="text/javascript"></script>
	<script src="../static/semantic.min.js" type="text/javascript"></script>
	<title>[CEOI2019Day2] Amusement Park</title>
	<script>
MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['$$$', '$$$']]
  },
  svg: {
    fontCache: 'global'
  }
};
	</script>
	<script type="text/javascript" id="MathJax-script" async src="../static/es5/tex-svg.js"></script>
</head>

<body>
	<div class="ui three item menu"><a class="header item" href="../index.html"><img src="../image/favicon.ico"> Comet OJ</a>
	</div>
	<div class="ui main container">
		<div class="ui center aligned grid">
			<div class="row">
				<h1 class="ui header">C1741 [CEOI2019Day2] Amusement Park</h1>
			</div>
				<div class="row" style="margin-top: -15px"><span class="ui label">内存限制：1024 MB</span> <span class="ui label">时间限制：3000 ms</span></div>
		</div>
		<div class="ui grid">
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">题目描述</h4>
					<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<p>You have been hired to supervise the project of a new amusement park. The park will have a special gimmick: directed slides that can get customers from one attraction to another quickly and in an entertaining way.</p><p>The park owner has given you the current project: a list of planned attractions and a list of slides that should be built between them. However, him being a businessman, he casually envisioned the impossible: among other things, he projected a slide coming from the Haunted Castle to the Roller Coaster, another from the Roller Coaster to the Drop Tower, and a third from the Drop Tower to the Haunted Castle. As the slides can only go downhill, it is evident why this is a problem. You don’t have the luxury of ignoring the laws of physics when building the park, so you have to request changes in the project. Maybe he would accept reversing the slide between the Drop Tower and the Haunted Castle?</p><p>Formally:</p><ul><li>The project is a list of attractions and a list of directed slides. Each slide starts at one attraction and ends at another attraction.</li><li>A proposal is obtained from the project by reversing the directions of some slides (possibly none or all of them).</li><li>A proposal is legal if there is a way to assign an elevation to each attraction in such a way that every slide goes downhill.</li><li>The cost of a proposal is the number of slides whose directions were reversed.</li></ul><p>For a given project, ﬁnd and report the sum of costs all legal proposals. Since this number may be large, output it modulo $998,244,353$.</p>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">输入格式</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<div class=content>
								<p>The ﬁrst line contains two space-separated integers $n, m (1 ≤ n ≤ 18, 0 ≤ m ≤ n(n − 1)/2)$ – the number of attractions and the number of slides, respectively. The attractions are numbered $1$ through $n$.</p><p>Then, $m$ lines follow. The $i$-th of these lines contains two space-separated integers $a_i, b_i (1 ≤ a_i,b_i ≤ n)$ denoting a slide from ai to bi.</p><p>You may assume that:</p><ul><li>There are no self-loops. (For each $i$: $a_i \ne b_i$.)</li><li>No slide appears twice. (For all $i \ne j$: $a_i \ne a_j$ or $b_i \ne b_j$.)</li><li>No pair of attractions is connected in both directions. (The unordered pairs $\{a_i,b_i\}$ are distinct.)</li></ul>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">输出</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<div class=content>
								<p>Output one line with a single integer, the sum of costs of all legal proposals modulo $998,244,353$.</p>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">样例</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<h4>样例输入 1</h4>
							<div class="ui existing segment">
								<pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain"><div class=content><span class=sampledata>2 1
1 2</span></div></code></pre>
							</div>
							<h4>样例输出 1</h4>
							<div class="ui existing segment">
								<pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain"><div class=content><span class=sampledata>1</span></div></code></pre>
							</div>
							<h4>样例输入 2</h4>
							<div class="ui existing segment">
								<pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain"><div class=content><span class=sampledata>3 3
1 2
2 3
1 3</span></div></code></pre>
							</div>
							<h4>样例输出 2</h4>
							<div class="ui existing segment">
								<pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain"><div class=content><span class=sampledata>9</span></div></code></pre>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">提示</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<div class=content>
								<p>Scoring</p><p>Subtask 1 (7 points): $n ≤ 3$</p><p>Subtask 2 (12 points): $n ≤ 6$</p><p>Subtask 3 (23 points): $n ≤ 10$</p><p>Subtask 4 (21 points): $n ≤ 15$</p><p>Subtask 5 (37 points): no additional constraints</p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>

</html>