<html>

<head>
	<meta charset="utf-8" />
	<link rel="icon" href="../image/favicon.ico" sizes="32x32" />
	<link rel="icon" href="../image/favicon.ico" sizes="192x192" />
	<link rel="stylesheet" type="text/css" href="../static/semantic.min.css">
	<script src="../static/jquery.min.js" type="text/javascript"></script>
	<script src="../static/semantic.min.js" type="text/javascript"></script>
	<title>[模拟赛 #1-D1]羁绊</title>
	<script>
MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\(', '\)']]
  },
  svg: {
    fontCache: 'global'
  }
};
	</script>
	<script type="text/javascript" id="MathJax-script" async src="../static/es5/tex-svg.js"></script>
</head>

<body>
	<div class="ui three item menu"><a class="header item" href="../index.html"><img src="../image/favicon.ico"> Comet OJ</a>
	</div>
	<div class="ui main container">
		<div class="ui center aligned grid">
			<div class="row">
				<h1 class="ui header">C1916 [模拟赛 #1-D1]羁绊</h1>
			</div>
				<div class="row" style="margin-top: -15px"><span class="ui label">内存限制：512 MB</span> <span class="ui label">时间限制：2000 ms</span></div>
		</div>
		<div class="ui grid">
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">题目描述</h4>
					<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<p><strong>※ <a href="https://share.weiyun.com/5zq2BHI">下发文件链接</a> （有更新）密码：wzayqj ，本题英文名为 $\texttt{relation}$ ，不需要 freopen 。</strong></p><p><strong>※ <a href="http://static.eduzhixin.com/cometoj/download/contest_74/Day1.zip">备用文件链接</a> 无需密码点击即可下载，本题英文名为 $\texttt{relation}$</strong> 。</p><p><strong>※ 跳过剧情的同学请从分割线开始看哦~</strong></p><p>ω 冲出了被毁的学院，无数黑暗魔法的光影在她身边炸开，她狼狈地在地上翻滚了一下，本来洁白的法师袍此时已经混杂着黑色的污渍和暗红色的已经凝固的血液。</p><p>奔跑，奔跑，奔跑。</p><p>ω 脑子里一片空白。同伴们在她的安排下都离开了，她的逃离计划里只有一个人没考虑到------她自己。</p><p>极目远望，那个之前只存在于 Ω 老师古老故事里的大魔王 Ψ ，此时竟若隐若现地出现在远方，随时可能向自己发出致命一击。</p><p>无路可走，唯有背水一战。</p><p>「就算是死，也要让 Ψ 付出应有的代价！」ω 坚定不移地举起法杖，正准备开始法术的吟唱时，身后已有无数的各类法术如洪流般奔涌而出。</p><p>「你们……」ω 猛然回首，无数同伴的身影都在。魔法学院的老师、同学组成了一个巨大的阵形，其中 ε 冲在阵形的最前方------当然还少不了她那尚是半吊子的火球术。</p><p>「我绝不会抛弃你的！」ε 一边奔跑着一边大喊着，一边挥舞着法杖发出一道道法术。</p><p>「……都来了。」ω 的眼眶已然湿润。</p><p>「全员，准备进攻！」ω 怒吼着，拉开了大战的帷幕。</p><hr><p>魔法学院阵营共有 $n$ 个人，第 $i$ 个人的战斗力是 $a_i$ 。她们会调整 $q$ 次阵形，第 $i$ 次调整会将第 $x_i$ 个人替换成一个战斗力为 $c_i$ 的人。</p><p>发起进攻时，每个人分别有 $\frac{1}{2}$ 的概率做好攻击准备。定义该次进攻的伤害值为 $d$ 。进攻前 $d = 0$ ，战斗力为 $k$ 的人攻击后，进攻的伤害值变为 $\frac{d + k}{2}$ 。由于<strong>所有做好攻击准备的人都会且仅会攻击一次</strong>，她们会安排攻击顺序使得最终 $d$ 的值尽量大。</p><p>请你帮 ω 分别求出调整阵形之前以及 $q$ 次调整每次调整之后进攻伤害 $d$ 的期望值对 $998244353$ 取模的结果（设期望值等于最简分数 $\frac{P}{Q}$ ，你输出的结果 $R$ 是满足 $R \times Q \equiv P\ (\text{mod}\ 998244353)$ 的最小非负整数）。</p>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">输入格式</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<div class=content>
								<p>第一行，包含一个正整数 $n$ ，为魔法学院阵营的人数。</p><p>第二行，包含 $n$ 个非负整数 $a_1,\,\cdots,\,a_n$ ，其中 $a_i$ 表示初始第 $i$ 个人的战斗力。</p><p>第三行，包含一个整数 $q$ ，为调整阵形的次数。</p><p>接下来 $q$ 行，其中第 $i$ 行包含两个正整数 $x_i,\,c_i$ ，表示第 $i$ 次调整第 $x_i$ 个人被替换成了一个战斗力为 $c_i$ 的人。</p>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">输出</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<div class=content>
								<p>共 $q + 1$ 行，其中第一行输出一个整数表示调整阵形之前发起进攻 $d$ 的期望值，第 $i + 1$ 行（$1 \le i \le q$）输出一个整数表示第 $i$ 次调整之后发起进攻 $d$ 的期望值，你输出的期望值应在 $998244353$ 模意义下。</p>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">样例</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<h4>样例输入 1</h4>
							<div class="ui existing segment">
								<pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain"><div class=content><span class=sampledata>2
8 18
2
1 9
2 18</span></div></code></pre>
							</div>
							<h4>样例输出 1</h4>
							<div class="ui existing segment">
								<pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain"><div class=content><span class=sampledata>6
811073543
811073543</span></div></code></pre>
							</div>
							<h4>样例输入 2</h4>
							<div class="ui existing segment">
								<pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain"><div class=content><span class=sampledata>6
114 514 19198 10 11451 41919
3
1 1451
4 1919
2 60817</span></div></code></pre>
							</div>
							<h4>样例输出 2</h4>
							<div class="ui existing segment">
								<pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain"><div class=content><span class=sampledata>505474442
41446924
662425254
616862282</span></div></code></pre>
							</div>
							<h4>样例输入 3</h4>
							<div class="ui existing segment">
								<pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain"><div class=content><span class=sampledata>见下发文件中 relation3.in</span></div></code></pre>
							</div>
							<h4>样例输出 3</h4>
							<div class="ui existing segment">
								<pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain"><div class=content><span class=sampledata>见下发文件中 relation3.ans</span></div></code></pre>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">提示</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<div class=content>
								<p><img alt="data.jpg" src="../upload/ebaf41dfff.jpg" width="650" height="622.2419928825623"><br></p><p>对于具有 特殊性质 1 的数据，有 $a_1=a_2=\cdots=a_n$ 。</p><p>对于具有 特殊性质 2 的数据，有 $x_1=x_2=\cdots=x_q$ 。</p><p>对于所有的数据，保证 $1 \le n \le 10^5 ,\  0 \le q \le 10^5,\ 1 \le x_i \le n,\ 0 \le a_i ,\, c_i &lt; 998244353$ 。</p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>

</html>