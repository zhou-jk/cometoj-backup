<html>

<head>
	<meta charset="utf-8" />
	<link rel="icon" href="../image/favicon.ico" sizes="32x32" />
	<link rel="icon" href="../image/favicon.ico" sizes="192x192" />
	<link rel="stylesheet" type="text/css" href="../static/semantic.min.css">
	<script src="../static/jquery.min.js" type="text/javascript"></script>
	<script src="../static/semantic.min.js" type="text/javascript"></script>
	<title>[CTSC2013Day2-C]组合子逻辑</title>
	<script>
MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\(', '\)']]
  },
  svg: {
    fontCache: 'global'
  }
};
	</script>
	<script type="text/javascript" id="MathJax-script" async src="../static/es5/tex-svg.js"></script>
</head>

<body>
	<div class="ui three item menu"><a class="header item" href="../index.html"><img src="../image/favicon.ico"> Comet OJ</a>
	</div>
	<div class="ui main container">
		<div class="ui center aligned grid">
			<div class="row">
				<h1 class="ui header">C0015 [CTSC2013Day2-C]组合子逻辑</h1>
			</div>
				<div class="row" style="margin-top: -15px"><span class="ui label">内存限制：128 MB</span> <span class="ui label">时间限制：1000 ms</span></div>
		</div>
		<div class="ui grid">
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">题目描述</h4>
					<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<p>组合子逻辑是 Moses Schönfinkel 和 Haskell Curry 发明的一种符号系统，用于消除数理逻辑中对于变量的需要。本题考察一种与真实世界的组合子演算略有差别的组合子系统。</p><p>一个组合子项是下列形式之一：</p><p>$P$</p><p>$(E_1$&nbsp; $E_2)$</p><p>其中 $P$ 表示一个基本函数，$E_1$​ 以及 $E_2$​ 表示一个组合子项（可以相同）。不满足以上形式表达式均非组合子项。</p><p>我们将一个组合子项$E$的参数个数 $np(E)$ 如下：</p><p>$np(P)=$ 基本函数 $P$ 的参数个数；</p><p>$np((E_1E_2))=np(E_1)−1$。</p><p>本题中，我们用一个正整数同时表示一个基本函数，以及该基本函数的参数个数。</p><p>对于一个组合子项 $E$，如果它和它包含的所有组合子项的参数个数 $np$ 均为正整数，那么我们称这个 $E$ 为范式。</p><p>我们经常组合子项简化表示：如果一个组合子项 $E$ 含有连续子序列 $(…((E_1E_2)E_3)…E_n)$（其中 $n≥3$），其中 $E_k$​ 表示组合子项（可以是简化表示的），那么将该部分替换为 $(E_1E_2E_3…E_n)$，其他部分不变，得到表达式 $E$ 的一个简化表示。一个组合子项可以被简化表示多次。</p><p>给定一个基本函数序列，问至少需要添加多少对括号，才能使得该表达式成为一个范式的简化表示（即满足范式的性质）；如果无论如何怎样添加括号，均不能得到范式的简化表示，输出 $−1$。</p>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">输入格式</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<div class=content>
								<p>第一行包含一个正整数 $T$，表示有 $T$ 次询问。</p><p>接下来 $2T$ 行。</p><p>第 $2k$ 行有一个正整数 $n_k$​，表示第 $k$ 次询问的序列中基本函数的个数。</p><p>第 $2k+1$ 行有 $n_k$ ​个正整数，其中第 $i$ 个整数表示序列中第 $i$ 个基本函数。</p>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">输出</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<div class=content>
								<p>输出 $T$ 行，每行一个整数，表示对应询问的输出结果。<br></p>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">样例</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<h4>样例输入 1</h4>
							<div class="ui existing segment">
								<pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain"><div class=content><span class=sampledata>2
5
3 2 1 3 2
5
1 1 1 1 1</span></div></code></pre>
							</div>
							<h4>样例输出 1</h4>
							<div class="ui existing segment">
								<pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain"><div class=content><span class=sampledata>3
-1</span></div></code></pre>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">提示</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<div class=content>
								<p>【样例说明】</p><p>第一次询问：一个最优方案是 (3 (2 1) (3 2))。可以证明不存在添加括号对数更少的方案。</p><p>第二次询问：容易证明不存在合法方案。</p><p>【数据规模和约定】</p><p>令 $TN$ 表示输入中所有 $n_k$​ 的和。</p><p><img alt="屏幕快照 2019-07-03 下午4.30.17.png" src="../upload/2b89133f18.png" width="250" height="297.5"><br></p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>

</html>