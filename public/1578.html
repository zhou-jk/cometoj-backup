<html>

<head>
	<meta charset="utf-8" />
	<link rel="icon" href="../image/favicon.ico" sizes="32x32" />
	<link rel="icon" href="../image/favicon.ico" sizes="192x192" />
	<link rel="stylesheet" type="text/css" href="../static/semantic.min.css">
	<script src="../static/jquery.min.js" type="text/javascript"></script>
	<script src="../static/semantic.min.js" type="text/javascript"></script>
	<title>[Contest #11]C-elebration</title>
	<script>
MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['$$$', '$$$']]
  },
  svg: {
    fontCache: 'global'
  }
};
	</script>
	<script type="text/javascript" id="MathJax-script" async src="../static/es5/tex-svg.js"></script>
</head>

<body>
	<div class="ui three item menu"><a class="header item" href="../index.html"><img src="../image/favicon.ico"> Comet OJ</a>
	</div>
	<div class="ui main container">
		<div class="ui center aligned grid">
			<div class="row">
				<h1 class="ui header">C1578 [Contest #11]C-elebration</h1>
			</div>
				<div class="row" style="margin-top: -15px"><span class="ui label">内存限制：256 MB</span> <span class="ui label">时间限制：1000 ms</span></div>
		</div>
		<div class="ui grid">
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">题目描述</h4>
					<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<p><strong>※ 简洁题意在分隔线下方</strong></p><p>伸展树用两根手指指向一条<strong>有 $n$ 个珠子的</strong>彩珠链子，夸张地做了个旋转的动作。那链子被赋予生命般舞动起来，折出四散的溢彩流光，衔接成了一个环形。「这是最后一条，这样生日会场就布置完了。非旋 treap 做得到吗？」语气中莫名的愉悦在少女回头时戛然而止，「 sgt 你在干什么？你不是因为我当时的敲诈…不，帮助，而对我怀恨在心吧？」</p><p>见伸展树转过头，满脸无辜的替罪羊树停下手上的动作，倒数第二个彩珠环裂成几段掉在地上：「我记得 kdt 更喜欢三角形…而且强迫症不允许我看到相同颜色的珠子出现在同一段上。」后一句的话音微不可闻。</p><p>伸展树剜了替罪羊树一眼，又以要杀人的眼神看了看前面已经全部被改造成三角形的环，叹了口气：「就是说，<strong>把这个环拆成三段，每段长度按珠子数量来算，使它们作为三条边可以拼成三角形，并且段内没有重复的颜色</strong>？那我就勉为其难地统一一下吧。…比起这个，为什么现在还没有第三个人到会场？」</p><p>「因为新一代的题目向我们宣战了。」替罪羊树展示出传来的新闻，平淡地复读顶端的标题，「一直没想出怎么和你说，就想着之后再…」话音未落，她便被火冒三丈的伸展树吊在了挂彩珠的墙上。</p><p>你对这个种族面临的战争毫无兴趣，只想知道最后一个彩环的<strong>合法拆分方案数</strong>，也就是说——</p><p><br></p><hr><p><b><br></b></p><p><b>简洁题意</b>：</p><p>有一个环 $a[1\dots n]$ ，求把它分成三段，使得每一段内无重复元素，且三段长度可以作为某个三角形的三边的方案数。</p><p>一个拆分方案可以看作一个三元组 $(a,b,c)$ ，其中 $0\lt a\lt b \lt c\le n$ ，表示在第 $a,b,c$ 个位置之前断开。两个拆分不同当且仅当其对应的三元组不同。</p>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">输入格式</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<div class=content>
								<p>第一行一个整数 $n(3\le n\le 2\times 10^6)$ ，表示环的长度。</p><p>第二行 $n$ 个整数，依序为 $a[1], a[2], \ldots, a[n]$ $(1\le a[i] \le n)$。</p>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">输出</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<div class=content>
								<p>一个整数，表示合法的拆分方案数。</p>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">样例</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<h4>样例输入 1</h4>
							<div class="ui existing segment">
								<pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain"><div class=content><span class=sampledata>5
2 3 1 1 4</span></div></code></pre>
							</div>
							<h4>样例输出 1</h4>
							<div class="ui existing segment">
								<pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain"><div class=content><span class=sampledata>3</span></div></code></pre>
							</div>
							<h4>样例输入 2</h4>
							<div class="ui existing segment">
								<pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain"><div class=content><span class=sampledata>5
1 2 3 4 5</span></div></code></pre>
							</div>
							<h4>样例输出 2</h4>
							<div class="ui existing segment">
								<pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain"><div class=content><span class=sampledata>5</span></div></code></pre>
							</div>
							<h4>样例输入 3</h4>
							<div class="ui existing segment">
								<pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain"><div class=content><span class=sampledata>4
1 2 3 4</span></div></code></pre>
							</div>
							<h4>样例输出 3</h4>
							<div class="ui existing segment">
								<pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain"><div class=content><span class=sampledata>0</span></div></code></pre>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">提示</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<div class=content>
								
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>

</html>