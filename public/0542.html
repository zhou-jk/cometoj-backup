<html>

<head>
	<meta charset="utf-8" />
	<link rel="icon" href="../image/favicon.ico" sizes="32x32" />
	<link rel="icon" href="../image/favicon.ico" sizes="192x192" />
	<link rel="stylesheet" type="text/css" href="../static/semantic.min.css">
	<script src="../static/jquery.min.js" type="text/javascript"></script>
	<script src="../static/semantic.min.js" type="text/javascript"></script>
	<title>[CEOI2013Day1] TRAM</title>
	<script>
MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\(', '\)']]
  },
  svg: {
    fontCache: 'global'
  }
};
	</script>
	<script type="text/javascript" id="MathJax-script" async src="../static/es5/tex-svg.js"></script>
</head>

<body>
	<div class="ui three item menu"><a class="header item" href="../index.html"><img src="../image/favicon.ico"> Comet OJ</a>
	</div>
	<div class="ui main container">
		<div class="ui center aligned grid">
			<div class="row">
				<h1 class="ui header">C0542 [CEOI2013Day1] TRAM</h1>
			</div>
				<div class="row" style="margin-top: -15px"><span class="ui label">内存限制：256 MB</span> <span class="ui label">时间限制：1000 ms</span></div>
		</div>
		<div class="ui grid">
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">题目描述</h4>
					<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<p>Seats in a new tram operating in Zagreb are organized into a grid consisting of $N$ rows numbered $1$ through $N$ and two columns numbered $1$ and $2$. The distance between two seats, one at row $R_A$, column $C_A$ and other at row $R_B$, column $C_B$ is the Euclidean distance between the centers of the corresponding grid squares – namely $\sqrt{(𝑅_𝐴 −𝑅_𝐵)^2 + (𝐶_𝐴−𝐶_𝐵)^2}$.</p><p>Most passengers prefer solitude when using public transportation and they always try to choose a seat that is as far away from other passengers as possible. More precisely, when a passenger enters the tram he or she will choose a free seat whose distance from the closest occupied seat is the highest possible. If there is more than one such seat, they will always choose one with the lower row number and if there is still more than one such seat, they will choose the one with the lower column number. After the passenger chooses a seat, he or she will sit there until leaving the tram. If the tram is empty, the next passenger to enter will always choose the seat in row 1 and column 1.</p><p><b>TASK</b></p><p>Write a program that will, given a sequence of events, each event either a passenger entering or leaving the tram, determine where each of the passengers was sitting. The tram is initially empty.</p><p>There are $M$ events in the input numbered $1$ through $M$ in the order in which they occurred. There are two kinds of events: event of type 'E' corresponds to a passenger entering the tram, while the event of type 'L' corresponds to a passenger leaving the tram. For an event of type 'L', an integer $P$ is also given – it specifies that the passenger leaving in this event is the one that entered at event $P$.</p><p>Test data will be such that there will always be at least one free seat in the tram whenever a passenger is trying to enter.</p>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">输入格式</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<div class=content>
								<p>The first line of input contains two integers $N$ and $M (1 ≤ N ≤ 150 000, 1 ≤ M ≤ 30 000)$, the number of rows in the tram and the number of events. The following $M$ lines contain the description of the events, $K$-th of those $M$ lines contains the description of event $K$ – either the character 'E', or the character 'L' followed by a single space and the integer $P_K (1 ≤ P_K &lt; K)$. Each $P_K$ will be valid– event $P_K$ is of type 'E' and no passenger will try to leave twice.<br></p>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">输出</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<div class=content>
								<p>The number of lines in the output should be equal to the number of events of type 'E' in the input. For each event of type 'E', in the order in which they occurred, output on a single line the row and the column number of the seat chosen by the passenger, separated by a single space.<br></p>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">样例</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<h4>样例输入 1</h4>
							<div class="ui existing segment">
								<pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain"><div class=content><span class=sampledata>3 7
E
E
E
L 2
E
L 1
E</span></div></code></pre>
							</div>
							<h4>样例输出 1</h4>
							<div class="ui existing segment">
								<pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain"><div class=content><span class=sampledata>1 1
3 2
1 2
3 1
1 1</span></div></code></pre>
							</div>
							<h4>样例输入 2</h4>
							<div class="ui existing segment">
								<pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain"><div class=content><span class=sampledata>13 9
E
E
E
E
E
E
E
E
E</span></div></code></pre>
							</div>
							<h4>样例输出 2</h4>
							<div class="ui existing segment">
								<pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain"><div class=content><span class=sampledata>1 1
13 2
7 1
4 2
10 1
2 2
3 1
5 1
6 2</span></div></code></pre>
							</div>
							<h4>样例输入 3</h4>
							<div class="ui existing segment">
								<pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain"><div class=content><span class=sampledata>10 9
E
E
E
E
L 3
E
E
L 6
E</span></div></code></pre>
							</div>
							<h4>样例输出 3</h4>
							<div class="ui existing segment">
								<pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain"><div class=content><span class=sampledata>1 1
10 2
5 2
7 1
4 2
2 2
4 1</span></div></code></pre>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">提示</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<div class=content>
								<p><b>GRADING</b></p><p>In test cases worth a total of 25 points, it holds $N ≤ 150$ and $M ≤ 150$.</p><p>In test cases worth a total of 45 points, it holds $N ≤ 1500$ and $M ≤ 1500$.</p><p>In test cases worth a total of 65 points, it holds $N ≤ 150 000$ and $M ≤ 1500$.</p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>

</html>