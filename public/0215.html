<html>

<head>
	<meta charset="utf-8" />
	<link rel="icon" href="../image/favicon.ico" sizes="32x32" />
	<link rel="icon" href="../image/favicon.ico" sizes="192x192" />
	<link rel="stylesheet" type="text/css" href="../static/semantic.min.css">
	<script src="../static/jquery.min.js" type="text/javascript"></script>
	<script src="../static/semantic.min.js" type="text/javascript"></script>
	<title>[APIO2019-C]路灯</title>
	<script>
MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['$$$', '$$$']]
  },
  svg: {
    fontCache: 'global'
  }
};
	</script>
	<script type="text/javascript" id="MathJax-script" async src="../static/es5/tex-svg.js"></script>
</head>

<body>
	<div class="ui three item menu"><a class="header item" href="../index.html"><img src="../image/favicon.ico"> Comet OJ</a>
	</div>
	<div class="ui main container">
		<div class="ui center aligned grid">
			<div class="row">
				<h1 class="ui header">C0215 [APIO2019-C]路灯</h1>
			</div>
				<div class="row" style="margin-top: -15px"><span class="ui label">内存限制：512 MB</span> <span class="ui label">时间限制：5000 ms</span></div>
		</div>
		<div class="ui grid">
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">题目描述</h4>
					<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<p>一辆自动驾驶的出租车正在 Innopolis 的街道上行驶。该街道上有 $n+1$ 个停车站点，它们将街道划分成了 $n$ 条路段。每一路段都拥有一个路灯。当第 $i$ 个路灯亮起，它将照亮连接第 $i$ 与第 $i+1$ 个站点的路段。否则这条路段将是黑暗的。</p><p>安全起见，出租车只能在被照亮的路段上行驶。换言之，出租车能从站点 $a$ 出发到达站点 $b(a&lt;b)$ 的条件是：连接站点 $a$ 与 $a+1$，$a+1$ 与 $a+2$，……，$b-1$ 与 $b$ 的路段都被照亮。</p><p>在经过一些意外故障或修理之后，街道上的路灯可能是亮起的，也可能是熄灭的。</p><p>现在给定 $0$ 时刻时，街道上路灯的初始状态。之后 $1,2,...,q$ 时刻，每时刻会发生下列两种事件之一：</p><ul><li>toggle $i$：切换第个路灯的状态。具体地说，若路灯原来亮起，则现在将熄灭；若路灯原来熄灭，则现在将亮起。</li><li>query $a$ $b$：出租车部门的负责人想知道，从 $0$ 时刻起到当前时刻，有多少个时刻满足：出租车能够从站点 $a$ 出发到达站点 $b$。</li></ul><p>请你帮助出租车部门的负责人回答他们的问题。</p>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">输入格式</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<div class=content>
								<p>第一行包含两个整数 $n$ 和 $q$——表示路灯的数量与时刻数。</p><p>第二行包含一个字符串 $s$ 表示路灯的初始状态，$s_i$ 为<code>1</code>表示第 $i$ 个路灯初始时亮起；$s_i$ 为<code>0</code>表示第 $i$ 个路灯初始时熄灭。</p><p>接下来 $q$ 行每行描述一个时刻的事件。第 $i$ 行描述时刻所发生的事件：</p><ul><li>toggle $i$：该时刻切换了第个路灯的状态。</li><li>query $a$ $b$：计算从 $0$ 时刻起到该时刻，共有多少个时刻满足：出租车能从站点 $a$ 出发到达站点 $b$。</li></ul><p>至少有一个时刻的事件是 query。</p>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">输出</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<div class=content>
								<p>对于每个 query 的事件，输出一行单个整数，表示该问题的答案。<br></p>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">样例</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<h4>样例输入 1</h4>
							<div class="ui existing segment">
								<pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain"><div class=content><span class=sampledata>5 7
11011
query 1 2
query 1 2
query 1 6
query 3 4
toggle 3
query 3 4
query 1 6</span></div></code></pre>
							</div>
							<h4>样例输出 1</h4>
							<div class="ui existing segment">
								<pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain"><div class=content><span class=sampledata>1
2
0
0
1
2</span></div></code></pre>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<h4 class="ui top attached block header">提示</h4>
						<div class="ui bottom attached segment font-content">
						<div style="position: relative; overflow: hidden;">
							<div class=content>
								<p>【样例说明】</p><p>在这组样例中<br></p><p><img alt="屏幕快照 2019-07-10 下午2.12.48.png" src="../upload/fbb6ee396e.png" width="700" height="651.2784090909091"><br></p><p>【数据范围与提示】</p><p>对于全部数据，$1 \le n,q \le 3 \times 10^5,|s|=n,1 \le i \le n, 1 \le a &lt; b \le n+1$。</p><p>详细子任务限制与分值如下表。（comet 不支持APIO评分方式）</p><p><img alt="屏幕快照 2019-07-10 下午2.14.26.png" src="../upload/b9e100fd49.png" width="700" height="267.7650429799427"><br></p><p>子任务 1：测试点 2-8</p><p>子任务 2：测试点 9-16</p><p>子任务 3：测试点 17-29</p><p>子任务 4：测试点 30-45</p><p>子任务 5：测试点 46-55</p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>

</html>